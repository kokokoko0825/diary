## 日付ロジック変更: AM3:00までは前日扱い（UTC基準）

### 目的

- ユーザーが深夜まで作業してから記録するケースを考慮し、**AM3:00までは前日として記録できるようにする**。
- クイズ入力（1日1回制御・保存される`date`）とダッシュボードの集計範囲で、同じ日付ロジックを使う。

### 仕様

- ベースタイムゾーンは **UTC 固定**。
- `now.getUTCHours() < 3` の時間帯は、**日付を1日巻き戻したもの**をその時点の「日付」として扱う。
- それ以外の時間帯では、UTC日付をそのまま使用する。
- 保存形式はこれまで通り `YYYY-MM-DD` 文字列。

### 実装概要

- `app/lib/date.ts`
  - `getDiaryDateUtc3(now?: Date): string`
    - UTC基準で AM3:00 までは前日扱いとした論理日付を `YYYY-MM-DD` で返す。
  - `getDiaryRangeUtc3(days: number, now?: Date): { startDate: string; endDate: string }`
    - 現在時刻から論理日付を計算し、その日付を `endDate` とする。
    - `now - days * 1日` を基準に同じロジックを適用した日付を `startDate` とする。
- `app/components/quiz/QuizContainer.tsx`
  - 1日1回チェック・保存時の日付に `getDiaryDateUtc3()` を使用。
- `app/routes/app.dashboard.tsx`
  - 期間計算関数 `getDateRange` から `getDiaryRangeUtc3` を呼び出し、クエリの開始日・終了日を取得。

### 想定される動作例

- `2026-02-26T02:59:59Z` → `"2026-02-25"`
- `2026-02-26T03:00:00Z` → `"2026-02-26"`
- `2027-01-01T02:30:00Z` → `"2026-12-31"`（年またぎ）

### テスト観点

- `getDiaryDateUtc3` 単体
  - 03:00 前後（02:59:59 / 03:00:00）の境界で日付が切り替わるか。
  - 月末 → 月初、年末 → 年初のまたぎで正しく前日計算されるか。
- クイズ画面
  - 同じ UTC カレンダー日でも、03:00 前と後で「今日分は記録済み」の判定が変わること。
  - 03:00 直前に前日分として保存され、03:00 を過ぎると新しい日付として保存されること。
- ダッシュボード
  - 期間指定（1週間/1ヶ月/3ヶ月/6ヶ月/1年など）で、`getDiaryRangeUtc3` が返す日付範囲に対してグラフが素直に追従すること。

